(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40712c51"],{"0701":function(t,e,i){var a=i("efe2"),n=i.n(a);n.a},"1c2f":function(t,e,i){var a=i("6a3d"),n=i.n(a);n.a},"6a3d":function(t,e,i){},b804:function(t,e,i){var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-sticky-box"},[t._t("default")],2)},n=[];i("4917"),i("a481"),i("28a5");function s(t,e){if(t&&e){for(var i=e.split(" "),a=" "+t.className+" ",n=0,s=i.length;n<s;n++){var r=i[n];r&&(t.classList?t.classList.remove(r):o(t,r)&&(a=a.replace(" "+r+" "," ")))}t.classList||(t.className=trim(a))}}function o(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function r(){var t=window.navigator.userAgent,e=t.match(/(iPad|iPhone|iPod)\s+OS\s([\d_.]+)/);return e&&e[2]&&parseInt(e[2].replace(/_/g,"."),10)>=6}function c(){for(var t=["","-webkit-","-ms-","-moz-","-o-"],e="",i=0;i<t.length;i++)e+="position:"+t[i]+"sticky";var a=document.createElement("div"),n=document.body;a.style.cssText="display:none"+e,n.appendChild(a);var s=/sticky/i.test(window.getComputedStyle(a).position);return n.removeChild(a),a=null,s}var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.scrollBox||window,a=e.offset||0,n=!0===e.checkStickySupport||!1;"string"===typeof i&&(i=document.getElementById(i));var o=t.offsetTop-a;i.removeEventListener("scroll",i.e);var l=function(){return i===window?document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:i.scrollTop},u=function(){var e=l();e>=o?(t.style.top=a+"px",t.classList.add("vux-fixed")):s(t,"vux-fixed")};n&&(r()||c())?(t.classList.add("vux-sticky"),t.style.top=a+"px"):(o=t.offsetTop-a,i.e=u,i.addEventListener("scroll",u))},u={name:"sticky",props:["scrollBox","offset","checkStickySupport"],mounted:function(){var t=this;this.$nextTick((function(){t.bindSticky()}))},activated:function(){this.removeFixed()},methods:{bindSticky:function(){var t=this;this.$nextTick((function(){l(t.$el,{scrollBox:t.scrollBox,offset:t.offset,checkStickySupport:"undefined"===typeof t.checkStickySupport||t.checkStickySupport})}))},removeFixed:function(){var t=document.querySelector(".vux-sticky-box");o(t,"vux-fixed")&&s(t,"vux-fixed")}}},h=u,d=(i("1c2f"),i("2877")),f=Object(d["a"])(h,a,n,!1,null,null,null);e["a"]=f.exports},d82a:function(t,e,i){t.exports=i.p+"static/img/failure.9971aa1e.png"},de0d:function(t,e,i){i("96cf");var a=i("3b8d"),n=i("d225"),s=i("b0b4"),o=i("308d"),r=i("6bb5"),c=i("4e2b"),l=i("9ab4"),u=i("60a3"),h=i("b3af"),d=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(o["a"])(this,Object(r["a"])(e).apply(this,arguments)),t.isPullRefreshLoading=!1,t.pullRefreshInitTimerId=null,t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"deactivated",value:function(){this.isPullRefreshLoading=!1,this.pullRefreshInitTimerId=null,this.$notify.clear(),clearInterval(this.pullRefreshInitTimerId)}},{key:"onRefresh",value:function(){var t=this;this.pullRefreshInitTimerId=setTimeout(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.pullRefreshInit();case 2:t.isPullRefreshLoading=!1,t.$notify({message:"数据加载成功",color:"#fff",background:"rgba(0,0,0,.5)"});case 4:case"end":return e.stop()}}),e)}))),h["e"])}}]),e}(u["c"]);d=Object(l["a"])([u["a"]],d),e["a"]=d},efe2:function(t,e,i){},f5f1:function(t,e,i){i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-container"},[i("van-pull-refresh",{directives:[{name:"scroll-maintain",rawName:"v-scroll-maintain"}],staticClass:"pull-refresh-box page-content",on:{refresh:t.onRefresh},model:{value:t.isPullRefreshLoading,callback:function(e){t.isPullRefreshLoading=e},expression:"isPullRefreshLoading"}},[i("Search",{staticClass:"view-search",attrs:{historyList:t.historyList,searchFunc:t.searchView,searchResult:t.searchViewResult},on:{clearHistory:t.handleClearHistory},scopedSlots:t._u([{key:"search-result",fn:function(e){var a=e.resultItem;return[i("div",{staticClass:"search-result-item",on:{click:function(e){return t.handleClickGoToView(a)}}},[t._v(t._s(a.viewpoint_title))])]}}])}),i("div",{staticClass:"common-tab"},[i("span",{class:{active:0===t.tabIndex},on:{click:function(e){return t.handleClickTab(0)}}},[t._v("最新")]),i("span",{class:{active:1===t.tabIndex},on:{click:function(e){return t.handleClickTab(1)}}},[t._v("热门")]),i("span",{class:{active:2===t.tabIndex},staticStyle:{"padding-right":"5px"}},[i("van-dropdown-menu",{staticClass:"tab-item",attrs:{title:"标签"}},[i("van-dropdown-item",{attrs:{options:t.tagOption},on:{change:t.handleDropDownChange},model:{value:t.tagVal,callback:function(e){t.tagVal=e},expression:"tagVal"}})],1)],1)]),i("LoadMore",{ref:"myLoadMore",attrs:{bottomMethod:t.loadBottom,canInif:t.canInif,isFinal:t.isFinal}},[t._l(t.viewList,(function(t,e){return i("ViewCard",{key:e,attrs:{viewData:t}})})),i("NoData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}]}),t.isFinal&&!t.showNoData?i("div",{staticClass:"reach-bottom"},[t._v("已经到底了")]):t._e()],2)],1)],1)},n=[],s=(i("ac6a"),i("96cf"),i("3b8d")),o=(i("7f7f"),i("d225")),r=i("b0b4"),c=i("308d"),l=i("6bb5"),u=i("4e2b"),h=i("9ab4"),d=i("60a3"),f=i("1fee"),v=i("9d59"),p=i("b804"),b=i("a2c9"),w=i("501e"),g=i("4bb5"),m=i("de0d"),y=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.tabIndex=0,t.tagVal=0,t.tagOption=[{text:"默认标签",value:0},{text:"标签一",value:1},{text:"标签二",value:2},{text:"标签三",value:3}],t.historyList=[],t.searchViewResult=[],t.requestNum=20,t.isFinal=!1,t.canInif=!0,t.viewList=[],t.positionStr=0,t.showNoData=!1,t}return Object(u["a"])(e,t),Object(r["a"])(e,[{key:"onTabIndexChange",value:function(t){var e=this;2!==t&&(this.resetListData(),this.getViewList().then((function(t){if(!t.data_list.length)return e.showNoData=!0,e.isFinal=!0,void(e.canInif=!1);e.viewList=t.data_list,e.buildListData(t.data_list)})))}},{key:"onTagValChange",value:function(t){var e=this;this.resetListData(),this.getViewList().then((function(t){if(!t.data_list.length)return e.showNoData=!0,e.isFinal=!0,void(e.canInif=!1);e.viewList=t.data_list,e.buildListData(t.data_list)}))}},{key:"beforeRouteEnter",value:function(t,e,i){i((function(t){"viewDetail"!==e.name&&(t.resetListData(),t.getViewTag(),t.init())}))}},{key:"activated",value:function(){this.$forceUpdate()}},{key:"beforeRouteLeave",value:function(t,e,i){"viewDetail"!==t.name&&this.resetListData(),i()}},{key:"init",value:function(){var t=this;this.getViewList().then((function(e){if(!e.data_list.length)return t.showNoData=!0,t.isFinal=!0,void(t.canInif=!1);t.viewList=e.data_list,t.buildListData(e.data_list)}))}},{key:"pullRefreshInit",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.positionStr=0,this.init();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getViewTag",value:function(){var t=this;this.$services.getViewTag().then((function(e){if("0"===e.error_no){var i=[{text:"默认标签",value:0}];e.data_list.forEach((function(t,e){i.push({text:t.String,value:e+1})})),t.tagOption=i}}))}},{key:"buildListData",value:function(t){this.positionStr=t[t.length-1].position_str,t.length<this.requestNum&&(this.isFinal=!0,this.canInif=!1)}},{key:"resetListData",value:function(){this.viewList=[],this.showNoData=!1,this.canInif=!0,this.isFinal=!1,this.positionStr=0}},{key:"getViewList",value:function(){return this.$services.getViewList({data:{tenant_key:window.LOCAL_CONFIG.TENANT_KEY,viewpoint_show_type:"1",position_str:this.positionStr,sort_type:this.sortType,request_num:this.requestNum,viewpoint_tag_name:0===this.tagVal?"":this.tagOption[this.tagVal].text}}).then((function(t){return t})).catch((function(t){console.log("getViewList error: ",t)}))}},{key:"loadBottom",value:function(){var t=this;setTimeout((function(){t.getViewList().then((function(e){t.viewList=t.viewList.concat(e.data_list),t.buildListData(e.data_list)}))}),200)}},{key:"searchView",value:function(t){var e=this;this.searchViewResult=[],this.$services.getViewByOperate({data:{tenant_id:this.userInfo.tenant_id,viewpoint_keyword:t}}).then((function(t){e.searchViewResult=t.data_list})).catch((function(t){console.log("getViewByOperate: ",t)}))}},{key:"handleClearHistory",value:function(){this.historyList=[]}},{key:"handleClickTab",value:function(t){this.tabIndex!==t&&(this.tabIndex=t,2!==t&&(this.tagVal=0))}},{key:"handleDropDownChange",value:function(t){0!==t&&this.handleClickTab(2)}},{key:"handleClickGoToView",value:function(t){this.$router.push({path:"/viewDetail",query:{viewId:t.viewpoint_id,brokerId:t.broker_id}})}},{key:"sortType",get:function(){var t=["3","1"];return t[this.tabIndex]}}]),e}(d["c"]);Object(h["a"])([g["a"]],y.prototype,"userInfo",void 0),Object(h["a"])([Object(d["d"])("tabIndex")],y.prototype,"onTabIndexChange",null),Object(h["a"])([Object(d["d"])("tagVal")],y.prototype,"onTagValChange",null),y=Object(h["a"])([Object(d["a"])({components:{Search:v["a"],ViewCard:f["a"],Sticky:p["a"],LoadMore:b["a"],NoData:w["a"]},mixins:[m["a"]]})],y);var k=y,x=k,L=(i("0701"),i("2877")),_=Object(L["a"])(x,a,n,!1,null,"d08d4c96",null);e["default"]=_.exports},f6ab:function(t,e,i){t.exports=i.p+"static/img/bg_no_data.93c56ab0.png"}}]);