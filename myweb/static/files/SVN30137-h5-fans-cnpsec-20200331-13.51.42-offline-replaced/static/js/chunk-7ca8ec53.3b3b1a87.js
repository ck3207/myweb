(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ca8ec53","chunk-ba62876c","chunk-45010ba1"],{"0754":function(t,e,a){},"1f99":function(t,e,a){},"3d9e":function(t,e,a){a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-history-interactive"},[a("div",{staticClass:"live-scroll-box"},[a("BsLoadMore",{ref:"pageLoadMore",attrs:{canLoad:t.canLoad},on:{loadMore:t.loadMore}},t._l(t.historyList,(function(e,i){return t.historyList.length?a("div",{key:i,ref:"baseDom",refInFor:!0},[a("MessageBubble",{attrs:{message:e,brokerName:t.liveInfo.brokerName}})],1):t._e()})),0)],1)])},o=[],n=(a("8e6e"),a("cadf"),a("456d"),a("ac6a"),a("e7e5"),a("d399")),r=a("bd86"),s=a("e8b7"),c=a("1a60"),f=a("310a"),l=a("2f62");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{MessageBubble:s["a"],BsLoadMore:c["a"]},data:function(){return{canLoad:"",historyList:[],showNoData:!1,lastSize:0,pageNo:1,pageSize:20}},computed:h({},Object(l["c"])(["liveInfo"])),activated:function(){this.canLoad="",this.historyList=[],this.showNoData=!1,this.lastSize=0,this.pageNo=1,this.initData()},methods:{initData:function(){this.getHistoryInteractiveMsg()},getHistoryInteractiveMsg:function(t,e){var a=this;Object(f["l"])(this.pageNo,this.pageSize).then((function(i){var o=i.result,n=i.totalNum;a.lastSize+=o.length,t?a.fixLoadData(Object(f["a"])(o),t,n,e):a.fixLoadData(Object(f["a"])(o.reverse()),t,n,e)})).catch((function(t){n["a"].fail(t),console.log("getHistoryInteractiveMsg"+t),a.canLoad=!1}))},fixLoadData:function(t,e,a,i){var o=this;this.lastSize>=a?this.canLoad=!1:this.canLoad=!0,e?(t.forEach((function(t){o.historyList.unshift(t)})),this.$nextTick((function(){var e=o.fixLoadDataHeight(t.length);"function"===typeof i&&i(e)}))):(this.historyList=t,t.length?setTimeout((function(){o.$refs.pageLoadMore.scrollBottom()}),300):this.showNoData=!0)},fixLoadDataHeight:function(t){for(var e=0,a=0;a<t;a++)e+=this.$refs.baseDom[a].clientHeight;return e},loadMore:function(t){this.pageNo++,this.getHistoryInteractiveMsg("append",t)}}},b=d,p=(a("8a4b"),a("2877")),v=Object(p["a"])(b,i,o,!1,null,"3907c69d",null);e["default"]=v.exports},"654c":function(t,e,a){},"8a4b":function(t,e,a){var i=a("1f99"),o=a.n(i);o.a},a288:function(t,e,a){var i=a("0754"),o=a.n(i);o.a},e697:function(t,e,a){a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-history-realtime"},[a("div",{staticClass:"live-scroll-box"},[a("BsLoadMore",{ref:"pageLoadMore",attrs:{canLoad:t.canLoad},on:{loadMore:t.loadMore}},t._l(t.historyList,(function(e,i){return t.historyList.length?a("div",{key:i,ref:"baseDom",refInFor:!0},[a("MessageCard",{attrs:{message:e,brokerName:t.liveInfo.brokerName}})],1):t._e()})),0)],1),a("div",{staticClass:"risk-tips"},[t._v("\n    【风险提示】以上内容仅供参考，不构成投资建议，亦不作为投资决策依据。股市有风险，入市需谨慎。\n  ")])])},o=[],n=(a("8e6e"),a("ac6a"),a("cadf"),a("456d"),a("e7e5"),a("d399")),r=a("bd86"),s=a("cc64"),c=a("1a60"),f=a("310a"),l=a("2f62");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={components:{MessageCard:s["a"],BsLoadMore:c["a"]},data:function(){return{canLoad:"",historyList:[],showNoData:!1,positionStr:0,requestNum:20}},computed:h({},Object(l["c"])(["liveInfo"])),activated:function(){this.canLoad="",this.historyList=[],this.showNoData=!1,this.positionStr=0,this.initData()},methods:{initData:function(){this.getHistoryRealTimeMsg()},getHistoryRealTimeMsg:function(t,e){var a=this;Object(f["j"])(this.positionStr,this.requestNum).then((function(i){a.positionStr=i.length&&i[i.length-1].position_str,t?a.fixLoadData(Object(f["b"])(i),t,e):a.fixLoadData(Object(f["b"])(i.reverse()),t,e)})).catch((function(t){Object(n["a"])(t),console.log("getHistoryRealTimeMsg"+t),a.canLoad=!1}))},fixLoadData:function(t,e,a){var i=this;t.length>=this.requestNum?this.canLoad=!0:this.canLoad=!1,e?(t.map((function(t){i.historyList.unshift(t)})),this.$nextTick((function(){var e=i.fixLoadDataHeight(t.length);"function"===typeof a&&a(e)}))):(this.historyList=t,t.length?setTimeout((function(){i.$refs.pageLoadMore.scrollBottom()}),300):this.showNoData=!0)},fixLoadDataHeight:function(t){for(var e=0,a=0;a<t;a++)e+=this.$refs.baseDom[a].clientHeight;return e},loadMore:function(t){this.getHistoryRealTimeMsg("append",t)}}},b=d,p=(a("e7b7"),a("2877")),v=Object(p["a"])(b,i,o,!1,null,"20dcab98",null);e["default"]=v.exports},e7b7:function(t,e,a){var i=a("654c"),o=a.n(i);o.a},ff95:function(t,e,a){a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-content page-review-detail",attrs:{id:"stickyBody"}},[a("div",{staticClass:"content-tab"},[a("span",{class:{active:0===t.activeTab},on:{click:function(e){return t.tabClick(0)}}},[t._v("实时直播区")]),a("span",{class:{active:1===t.activeTab},on:{click:function(e){return t.tabClick(1)}}},[t._v("互动区")])]),a("div",{staticClass:"topic-info"},[a("div",{staticClass:"title"},[t._v("\n        当前话题: "+t._s(t.liveInfo.chatTopic)+"\n        "),a("span",{staticClass:"time"},[t._v(t._s(t._f("formatTime")(t.liveInfo.startTime,"yyyy-MM-dd HH:mm")))])]),a("div",{staticClass:"people"},[a("i",{staticClass:"icon iconfont-cnpsec iconfont-hot"}),t._v(t._s(t.liveInfo.onlineNum)+"人")])]),a("div",{staticClass:"main-container"},[a("keep-alive",[a(t.currentTabComponent,{tag:"component"})],1)],1)])])},o=[],n=a("e697"),r=a("3d9e"),s={data:function(){return{activeTab:0,liveInfo:{}}},computed:{currentTabComponent:function(){var t=[n["default"],r["default"]];return t[this.activeTab]}},activated:function(){var t=this.$route.query;this.liveInfo={brokerId:t.brokerId,brokerKey:t.brokerKey,brokerName:t.brokerName,brokerAvatar:t.brokerAvatar,topicId:t.topicId,chatTopic:t.chatTopic,onlineNum:t.onlineNum,startTime:t.startTime},this.$store.commit("SET_LIVE_INFO",this.liveInfo),this.activeTab=0},methods:{tabClick:function(t){this.activeTab!==t&&(this.activeTab=t)}}},c=s,f=(a("a288"),a("2877")),l=Object(f["a"])(c,i,o,!1,null,"e5f0dee0",null);e["default"]=l.exports}}]);