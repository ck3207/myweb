(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29ad844b"],{"08f6":function(t,e,a){var i=a("a486"),n=a.n(i);n.a},4864:function(t,e,a){},"4f43":function(t,e,a){a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("van-pull-refresh",{directives:[{name:"scroll-maintain",rawName:"v-scroll-maintain"}],staticClass:"pull-refresh-box page-content",on:{refresh:t.onRefresh},model:{value:t.isPullRefreshLoading,callback:function(e){t.isPullRefreshLoading=e},expression:"isPullRefreshLoading"}},[a("LoadMore",{ref:"myLoadMore",attrs:{bottomMethod:t.loadBottom,canInif:t.canInif,isFinal:t.isFinal}},[t._l(t.pushList,(function(t,e){return a("PushCard",{key:t.pushmsg_id,attrs:{noticeData:t}})})),a("NoData",{directives:[{name:"show",rawName:"v-show",value:t.showNoData,expression:"showNoData"}]}),t.isFinal&&!t.showNoData?a("div",{staticClass:"reach-bottom"},[t._v("已经到底了")]):t._e()],2)],1)],1)},n=[],s=(a("96cf"),a("3b8d")),o=(a("7f7f"),a("d225")),c=a("b0b4"),r=a("308d"),u=a("6bb5"),l=a("4e2b"),h=a("9ab4"),f=a("60a3"),p=a("a2c9"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"push-card-container",on:{click:t.handleClickPushCard}},[a("div",{staticClass:"push-info"},[a("div",{staticClass:"push-header"},[t.noticeData.service_title?a("span",{staticClass:"push-title"},[t._v("\n          "+t._s(t.noticeData.service_title)+"\n        ")]):t._e(),a("span",{staticClass:"push-time"},[t._v("\n          "+t._s(t.noticeData.happen_time)+"\n        ")])]),a("span",{staticClass:"push-type",class:{pushStyle:t.pushStyle}},[t._v(t._s(t.noticeData.service_type))])]),t.noticeData.service_content?a("div",{staticClass:"push-content"},[t._v(t._s(t.noticeData.service_content))]):t._e()])},v=[],b=(a("28a5"),function(t){function e(){return Object(o["a"])(this,e),Object(r["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"handleClickPushCard",value:function(){var t=this.noticeData.url;if(t.indexOf("http://")>=0||t.indexOf("https://")>=0)window.location.href=t;else{var e=t.split("#");e[1]&&this.$router.push(e[1])}}},{key:"pushStyle",get:function(){return 1===this.noticeData.icon_flag?"warehouse":3===this.noticeData.icon_flag?"faq":2===this.noticeData.icon_flag?"view":4===this.noticeData.icon_flag?"combine":5===this.noticeData.icon_flag?"order":void 0}}]),e}(f["c"]));Object(h["a"])([Object(f["b"])({type:Object,default:function(){return{}}})],b.prototype,"noticeData",void 0),b=Object(h["a"])([f["a"]],b);var g=b,m=g,_=(a("08f6"),a("2877")),O=Object(_["a"])(m,d,v,!1,null,"0a0f91b2",null),y=O.exports,D=a("501e"),L=a("4bb5"),w=a("de0d"),j=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(r["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.requestNum=20,t.isFinal=!1,t.canInif=!0,t.pushList=[],t.pageNo=1,t.showNoData=!1,t}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"beforeRouteEnter",value:function(t,e,a){a((function(t){"pushDetail"!==e.name&&(t.resetListData(),t.init())}))}},{key:"activated",value:function(){this.$forceUpdate()}},{key:"beforeRouteLeave",value:function(t,e,a){"pushDetail"!==t.name&&this.resetListData(),a()}},{key:"init",value:function(){var t=this;this.getPushList().then((function(e){if(!e.data_list.length)return t.showNoData=!0,t.isFinal=!0,void(t.canInif=!1);var a=e.data_list.map((function(t){var e={};try{e=JSON.parse(t.message)}catch(a){console.log("转换失败",a)}return e}));console.log("message",a),t.pushList=a,t.buildListData(a)}))}},{key:"pullRefreshInit",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.pageNo=1,this.init();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"buildListData",value:function(t){this.pageNo++,t.length<this.requestNum&&(this.isFinal=!0,this.canInif=!1)}},{key:"resetListData",value:function(){this.pushList=[],this.showNoData=!1,this.canInif=!0,this.isFinal=!1,this.pageNo=1}},{key:"getPushList",value:function(){return this.$services.funcPushMsgList({data:{user_id:this.userInfo.user_id,tenant_id:this.userInfo.tenant_id||window.LOCAL_CONFIG.COMPANY_ID,push_channel:"1",page_no:this.pageNo,page_size:this.requestNum}}).then((function(t){return t})).catch((function(t){console.log("getPushList error: ",t)}))}},{key:"loadBottom",value:function(){var t=this;setTimeout((function(){t.getPushList().then((function(e){var a=e.data_list.map((function(t){var e={};try{e=JSON.parse(t.message)}catch(a){console.log("转换失败",a)}return e}));console.log("message",a),t.pushList=t.pushList.concat(a),t.buildListData(a)}))}),200)}}]),e}(f["c"]);Object(h["a"])([L["a"]],j.prototype,"userInfo",void 0),j=Object(h["a"])([Object(f["a"])({components:{PushCard:y,LoadMore:p["a"],NoData:D["a"]},mixins:[w["a"]]})],j);var k=j,I=k,N=(a("676f"),Object(_["a"])(I,i,n,!1,null,"0691122c",null));e["default"]=N.exports},"676f":function(t,e,a){var i=a("4864"),n=a.n(i);n.a},a486:function(t,e,a){},de0d:function(t,e,a){a("96cf");var i=a("3b8d"),n=a("d225"),s=a("b0b4"),o=a("308d"),c=a("6bb5"),r=a("4e2b"),u=a("9ab4"),l=a("60a3"),h=a("b3af"),f=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(o["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isPullRefreshLoading=!1,t.pullRefreshInitTimerId=null,t}return Object(r["a"])(e,t),Object(s["a"])(e,[{key:"deactivated",value:function(){this.isPullRefreshLoading=!1,this.pullRefreshInitTimerId=null,this.$notify.clear(),clearInterval(this.pullRefreshInitTimerId)}},{key:"onRefresh",value:function(){var t=this;this.pullRefreshInitTimerId=setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.pullRefreshInit();case 2:t.isPullRefreshLoading=!1,t.$notify({message:"数据加载成功",color:"#fff",background:"rgba(0,0,0,.5)"});case 4:case"end":return e.stop()}}),e)}))),h["e"])}}]),e}(l["c"]);f=Object(u["a"])([l["a"]],f),e["a"]=f},f6ab:function(t,e,a){t.exports=a.p+"static/img/bg_no_data.93c56ab0.png"}}]);